# Features

## Memory System

- **Short-term Memory (In-Memory)**: Fast session-scoped context with message window (10 msgs), task states, and temporary observations.
- **Long-term Memory (SQLite)**: Stores full interaction history in `data/memory/long_memory.db`. Uses BM25 for semantic search.
- **Fixed Facts (MEMORY.md)**: Stores immutable user facts (e.g., preferences, tech stack) in `lightagent/base/memory/MEMORY.md` (or `workspace/memory/MEMORY.md`).
- **Auto-Summary**: Portuguese summaries generated by the LLM for every Q&A.
- **Tool Observations**: Automatically captures insights from tool executions (read_file, exec, grep, etc.) as searchable observations.
- **Vector Memory Search**: Semantic similarity search using embeddings (complements BM25 keyword search). Supports SimpleEmbeddingProvider (no API) and integrates with external embedding services.

## Advanced Reasoning

- **Thinking Control**: Configurable reasoning levels (OFF/LOW/MEDIUM/HIGH) to control verbosity and depth of agent reasoning. Optimizes token usage while maintaining response quality.

## Context Optimization

- **Session Compaction**: Automatic context optimization when approaching token limits. Supports multiple strategies:
  - **Summarize**: Condenses old messages into concise summaries.
  - **Prune**: Removes low-importance messages based on content analysis.
  - **Merge**: Combines similar consecutive messages.
  - **Semantic**: Uses importance scoring to preserve critical content.

## Tools & Skills

- **Native Tools**: `exec`, `list_dir`, `read_file`, `write_file`, `web_search`, `web_fetch`.
- **Markdown Skills**: Discovered in `lightagent/base/skills/` (fallback to `workspace/skills/`).
- **Sub-agents**: Task delegation via `spawn`, `parallel_spawn`, and result coordination via `wait_subagents`.
- **CodeSearch Skill**: Production patterns from open source repos (`workspace/skills/codesearch/`)
- **Librarian Agent**: External documentation research specialist (`workspace/agents/librarian.md`)

## MCP Integrations

Connect to external Model Context Protocol servers (e.g., Google Drive, Slack) by configuring `lightagent/base/servers_config.json` (or `workspace/servers_config.json`).

## Security Controls

- **Shell Command Safety**: Command allowlist, injection protection, and subprocess isolation.
- **SSRF Protection**: Blocks private IPs and cloud metadata endpoints.
- **Workspace Security**: File operations confined to workspace directory.
- **Sandbox Isolation**: Containerized execution for risky tools with configurable isolation levels:
  - **Process**: Process-level isolation with resource limits.
  - **Docker**: Full container isolation when Docker is available.
  - **Profiles**: Predefined configurations (readonly_fs, safe_exec, network_ok).

Configure in `.env`:
```env
RESTRICT_TO_WORKSPACE=true  # Default: true
```
