# Light Agent

<div align="center">

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.12+](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org/downloads/)
[![Last Commit](https://img.shields.io/github/last-commit/adilsonmenechini/light-agent/main)](https://github.com/adilsonmenechini/light-agent/commits/main)
[![Activity](https://img.shields.io/github/commit-activity-m/adilsonmenechini/light-agent)](https://github.com/adilsonmenechini/light-agent/graphs/commit-activity)

**Lightweight AI Agent** designed for local execution, portability, and everyday tasks.

[Quick Start](#quick-start) • [Documentation](docs/getting-started.md) • [Contributing](CONTRIBUTING.md)

</div>

---

## Why Light Agent?

| Feature | Light Agent | Other Agents |
|---------|------------|-------------|
| **Local Execution** | ✅ Ollama, local LLMs | Often cloud-only |
| **Framework-agnostic** | ✅ Pure Python, no LangChain | Heavy framework dependencies |
| **Memory System** | ✅ Short-term + Long-term (SQLite) | Basic context only |
| **Security First** | ✅ Command allowlist, SSRF protection | Often requires manual config |
| **File-based Skills** | ✅ Markdown skills, no code changes | Custom plugin systems |
| **Subagents** | ✅ Parallel execution | Sequential only |
| **Zero Setup** | ✅ Works out of the box | Complex configuration |

## Quick Start

```bash
# Install
git clone https://github.com/adilsonmenechini/light-agent.git
cd light-agent
uv sync

# Interactive chat
uv run lightagent chat

# Single prompt
uv run lightagent chat "Analyze my codebase"
```

See [Getting Started Guide](docs/getting-started.md) for detailed instructions.

## Documentation

- [Getting Started](docs/getting-started.md) - Quick start guide
- [Architecture Overview](docs/architecture.md) - System design
- [Workspace Structure](docs/workspace.md) - Customization guide
- [Providers Configuration](docs/providers.md) - LLM setup
- [Tools & MCP Integrations](docs/tools_mcp.md) - Available tools
- [Librarian & External Research Tools](docs/librarian_tools.md) - Web research
- [Development Guide](docs/development_guide.md) - Contributing code
- [Contributing](CONTRIBUTING.md) - How to help

## Usage

> **New here?** Start with the [Getting Started Guide](docs/getting-started.md)

### Interactive Chat

Start a persistent chat session:
```bash
uv run lightagent chat
```

Or run a single prompt:
```bash
uv run lightagent chat "Sua pergunta aqui"
```

Use verbose mode for detailed logs:
```bash
uv run lightagent chat "Sua pergunta aqui" --verbose
```

### Slash Commands
Inside the interactive chat mode, you can use the following commands:
- `/new`: Clear current conversation history and start fresh.
- `/status`: Show connected MCP servers and loaded markdown skills.
- `/reset`: Restart tools and reconnect to MCP servers.
- `/quit` or `/exit`: Close the session.

## Core Features

### Tools & Skills

- **Native Tools**: `exec`, `list_dir`, `read_file`, `write_file`, `web_search`, `web_fetch`.
- **Markdown Skills**: Discovered in `light_agent/base/skills/` (fallback to `workspace/skills/`).
- **Sub-agents**: Task delegation via `spawn`, `parallel_spawn`, and result coordination via `wait_subagents`.
- **CodeSearch Skill**: Production patterns from open source repos (`workspace/skills/codesearch/`)
- **Librarian Agent**: External documentation research specialist (`workspace/agents/librarian.md`)

### MCP Integrations

Connect to external Model Context Protocol servers (e.g., Google Drive, Slack) by configuring `light_agent/base/servers_config.json` (or `workspace/servers_config.json`).

### Memory System
- **Short-term Memory (In-Memory)**: Fast session-scoped context with message window (10 msgs), task states, and temporary observations.
- **Long-term Memory (SQLite)**: Stores full interaction history in `data/memory/long_memory.db`. Uses BM25 for semantic search.
- **Fixed Facts (MEMORY.md)**: Stores immutable user facts (e.g., preferences, tech stack) in `light_agent/base/memory/MEMORY.md` (or `workspace/memory/MEMORY.md`).
- **Auto-Summary**: Portuguese summaries generated by the LLM for every Q&A.
- **Tool Observations**: Automatically captures insights from tool executions (read_file, exec, grep, etc.) as searchable observations.

## Project Status

Light Agent is **actively developed** with regular updates:

| Metric | Status |
|--------|--------|
| **Last Commit** | Active development (see commit history) |
| **Features** | 11 major features completed, roadmap evolving |
| **Issues** | Triaged and addressed regularly |
| **Contributions** | Welcome! See [CONTRIBUTING.md](CONTRIBUTING.md) |

### Recent Updates (Last 30 Days)

- ✅ Short-term memory for session-scoped context
- ✅ GitHub tools (check, public repos)
- ✅ Parallel subagent execution
- ✅ Enhanced security controls

### Coming Soon

| Feature | Status | Description |
|---------|--------|-------------|
| MCP Server Templates | In Progress | Pre-configured MCP integrations |
| Telegram Integration | Planned | Chat-based interface via Telegram bot |
| Docker Support | ✅ Done | Containerized deployment |

## Docker

Build and run with Docker:

```bash
# Build image
docker build -t light-agent .

# Interactive chat
docker run -it --rm -v $(pwd)/workspace:/app/workspace light-agent

# Single prompt
docker run --rm -v $(pwd)/workspace:/app/workspace light-agent "Analyze my codebase"
```

For persistent memory, mount the data directory:
```bash
docker run -it --rm -v $(pwd)/workspace:/app/workspace -v $(pwd)/data:/app/data light-agent
```

## Security Features

| Feature | Category | Status | Description |
| :--- | :--- | :--- | :--- |
| **Short-term Memory** | Memory | ✅ Done | In-memory session context with message window, task states, and temporary observations. |
| **Long-term Memory** | Memory | ✅ Done | Persistent storage using SQLite + BM25 with time-based filtering (e.g., last 30d). |
| **Tool Observations** | Memory | ✅ Done | Auto-capture insights from tool executions as searchable observations. |
| **Parallel Subagents** | Agents | ✅ Done | Enable multiple subagents to work concurrently on complex tasks. |
| **Multi-Model Orchestration** | LLM | ✅ Done | Use different models for reasoning (main loop) vs. speed (summaries). |
| **Interactive Chat Mode** | CLI | ✅ Done | Persistent chat session launched via `uv run lightagent chat`. |
| **Slash Commands** | CLI | ✅ Done | Support for commands like `/new`, `/reset`, and `/status` within the chat. |
| **Security Hardening** | Security | ✅ Done | Shell command allowlist, injection protection, workspace restriction. |
| **Human Approval Tool** | 12-Factor | ✅ Done | Pause execution for human approval before high-stakes operations. |
| **Control Flow Hooks** | 12-Factor | ✅ Done | Intercept agent execution at strategic points (before/after tool, LLM calls). |
| **Reducer Pattern** | 12-Factor | ✅ Done | Immutable state transitions for predictable, testable agent behavior. |

## Security Features

Light Agent includes enterprise-grade security controls:

| **Shell Command Safety** | Command allowlist, injection protection, and subprocess isolation. |
| **SSRF Protection** | Blocks private IPs and cloud metadata endpoints. |
| **Workspace Security** | File operations confined to workspace directory. |

Configure in `.env`:
```env
RESTRICT_TO_WORKSPACE=true  # Default: true
```

